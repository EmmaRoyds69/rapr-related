<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>RAPR Investment Calculator</title>
    <!-- Viewport Meta Tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Font Definitions */
        @font-face {
            font-family: 'Slipstream';
            src: url('7046df55374e709021c7.TTF') format('truetype');
        }

        @font-face {
            font-family: 'ALD721L';
            src: url('64e0e163b2b784ad64eb.TTF') format('truetype');
        }

        /* Global Styles */
        body,
        html {
            min-height: 100%;
            margin: 0;
            background: url('bg.png') no-repeat center center fixed;
            background-size: cover;
            font-family: 'ALD721L', Arial, sans-serif;
            overflow: hidden;
        }

        /* Heading Styles */
        h1,
        h2 {
            font-family: 'Slipstream', Arial, sans-serif;
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
            font-weight: normal;
            font-style: italic;
            letter-spacing: 0.05em;
        }

        h2 {
            text-align: center;
        }

        /* Container Styles */
        .title-container,
        .holding-container {
            margin: 0.5rem auto;
            padding: 1rem;
            border: 3px solid #000;
            background-color: #fff;
            box-sizing: border-box;
            max-width: 600px;
            width: 90%;
        }

        .title-container {
            text-align: center;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            margin-right: 40%;
        }

        td {
            padding: 0.5rem;
        }

        td:first-child {
            text-align: right;
            padding-right: 0.5rem;
        }


        s td:nth-child(2) {
            max-width: 20%;
            /* Second cell takes 10% */
        }

        td[colspan="2"] {
            text-align: center;
        }

        /* Input and Button Styles */
        input[type="number"] {
            width: 100%;
            padding: 0.5rem;
            box-sizing: border-box;
            border: 2px solid #000;
        }

        button {
            padding: 0.5rem;
            margin-top: 0.5rem;
            background-color: #fff;
            border: 2px solid #000;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Slipstream', Arial, sans-serif;
        }

        /* Result Styles */
        .result {
            padding: 0.5rem;
            line-height: 1.8;
        }

        .profit {
            color: black;
        }

        .loss {
            color: red;
        }

        /* Media Queries for Responsiveness */
        @media screen and (max-width: 768px) {

            h1,
            h2 {
                font-size: 1.5rem;
            }

            .title-container,
            .holding-container {
                padding: 0.75rem;
            }

            td {
                padding: 0.25rem;
            }

            td:first-child {
                padding-right: 0.25rem;
            }

            input[type="number"] {
                padding: 0.25rem;
            }

            button {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
        }

        @media screen and (max-width: 480px) {

            h1,
            h2 {
                font-size: 1.25rem;
            }

            button {
                font-size: 0.8rem;
            }
        }

        @media screen and (max-width: 600px) {

            body,
            html {
                background-attachment: scroll;
            }
        }
    </style>
</head>

<body>
    <!-- Title Container -->
    <div class="title-container">
        <h1>R-APR Calculator</h1>
        <p>Choose your path to revanchist, dynastic levels of generational wealth.</p>
    </div>

    <!-- Holding Container -->
    <div class="holding-container">
        <!-- Buy & Stake -->
        <div>
            <h2>Buy & Stake</h2>
            <table>
                <tr>
                    <td><label for="opt1_investment">Initial Investment ($):</label></td>
                    <td><input type="number" id="opt1_investment" value="140" step="0.01"
                            onchange="updateFields('inv', 'opt1')"></td>
                </tr>
                <tr>
                    <td><label for="opt1_rapr">RAPR Purchased:</label></td>
                    <td><input type="number" id="opt1_rapr" value="10" step="0.0001"
                            onchange="updateFields('rapr', 'opt1')"></td>
                </tr>
                <tr>
                    <td><label for="opt1_price_per_rapr">Price per RAPR ($):</label></td>
                    <td><input type="number" id="opt1_price_per_rapr" value="14" step="0.01"
                            onchange="updateFields('price', 'opt1')"></td>
                </tr>
                <tr>
                    <td><label for="opt1_apr">APR (%):</label></td>
                    <td><input type="number" id="opt1_apr" value="102" step="0.01"></td>
                </tr>
                <tr>
                    <td><label for="opt1_hold_days">Hold Period (days):</label></td>
                    <td><input type="number" id="opt1_hold_days" value="7" step="1"></td>
                </tr>
                <tr>
                    <td><label for="opt1_market_price">Market Price At Sale ($):</label></td>
                    <td><input type="number" id="opt1_market_price" value="14" step="0.01"></td>
                </tr>
                <tr>
                    <td colspan="2"><button onclick="calculateOption1()">Calculate Buy & Stake</button></td>
                </tr>
            </table>
            <div id="opt1_result" class="result"></div>
        </div>

        <!-- Tickets & Hold -->
        <div>
            <h2>Tickets & Hold</h2>
            <table>
                <tr>
                    <td><label for="opt2_investment">Initial ($):</label></td>
                    <td><input type="number" id="opt2_investment" value="160" step="0.01"
                            onchange="updateFields('inv', 'opt2')"></td>
                </tr>
                <tr>
                    <td><label for="opt2_rapr">RAPR Received:</label></td>
                    <td><input type="number" id="opt2_rapr" value="13.33" step="0.0001"
                            onchange="updateFields('rapr', 'opt2')"></td>
                </tr>
                <tr>
                    <td><label for="opt2_price_per_rapr">Price per RAPR ($):</label></td>
                    <td><input type="number" id="opt2_price_per_rapr" value="12" step="0.01"
                            onchange="updateFields('price', 'opt2')"></td>
                </tr>
                <tr>
                    <td><label for="opt2_wait_days">Waiting Period (days):</label></td>
                    <td><input type="number" id="opt2_wait_days" value="3" step="1"></td>
                </tr>
                <tr>
                    <td><label for="opt2_hold_days">Hold Period (days):</label></td>
                    <td><input type="number" id="opt2_hold_days" value="7" step="1"></td>
                </tr>
                <tr>
                    <td><label for="opt2_apr">APR (%) for Remaining Period:</label></td>
                    <td><input type="number" id="opt2_apr" value="102" step="0.01"></td>
                </tr>
                <tr>
                    <td><label for="opt2_market_price">Market Price At Sale ($):</label></td>
                    <td><input type="number" id="opt2_market_price" value="14" step="0.01"></td>
                </tr>
                <tr>
                    <td colspan="2"><button onclick="calculateOption2()">Calculate Tickets & Hold</button></td>
                </tr>
            </table>
            <div id="opt2_result" class="result"></div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        function updateFields(changed, opt) {
            const invField = document.getElementById(`${opt}_investment`);
            const raprField = document.getElementById(`${opt}_rapr`);
            const priceField = document.getElementById(`${opt}_price_per_rapr`);

            let inv = parseFloat(invField.value);
            let rapr = parseFloat(raprField.value);
            let price = parseFloat(priceField.value);

            if (changed === 'inv' && !isNaN(inv) && !isNaN(price) && price !== 0) {
                raprField.value = (inv / price).toFixed(4);
            } else if (changed === 'rapr' && !isNaN(rapr) && !isNaN(price)) {
                invField.value = (rapr * price).toFixed(2);
            } else if (changed === 'price' && !isNaN(rapr) && !isNaN(price)) {
                invField.value = (rapr * price).toFixed(2);
            }
        }

        function calculateOption1() {
            const investment = parseFloat(document.getElementById('opt1_investment').value);
            const raprPurchased = parseFloat(document.getElementById('opt1_rapr').value);
            const apr = parseFloat(document.getElementById('opt1_apr').value);
            const holdDays = parseInt(document.getElementById('opt1_hold_days').value);
            const marketPrice = parseFloat(document.getElementById('opt1_market_price').value);

            const dailyInterestRate = apr / 365 / 100;
            const totalYield = dailyInterestRate * holdDays;
            const raprEarned = raprPurchased * totalYield;
            const totalRAPR = raprPurchased + raprEarned;
            const totalValue = totalRAPR * marketPrice;
            const profitLoss = totalValue - investment;
            const breakevenPrice = investment / totalRAPR;

            const resultDiv = document.getElementById('opt1_result');
            let profitLossClass = profitLoss < 0 ? 'loss' : 'profit';

            resultDiv.innerHTML = `
                <strong>Total RAPR:</strong> ${isNaN(totalRAPR) ? 'Check values' : totalRAPR.toFixed(4)}<br>
                <strong>Value:</strong> ${isNaN(totalValue) ? 'Check values' : `$${totalValue.toFixed(2)}`}<br>
                <span class="${profitLossClass}"><strong>${profitLoss < 0 ? 'Loss' : 'Profit'}:</strong> $${isNaN(profitLoss) ? 'Check values' : profitLoss.toFixed(2)}</span><br>
                <strong>Breakeven:</strong> $${isNaN(breakevenPrice) ? 'Check values' : breakevenPrice.toFixed(2)}
            `;
        }

        function calculateOption2() {
            const investment = parseFloat(document.getElementById('opt2_investment').value);
            const raprReceived = parseFloat(document.getElementById('opt2_rapr').value);
            const waitDays = parseInt(document.getElementById('opt2_wait_days').value);
            const totalHoldDays = parseInt(document.getElementById('opt2_hold_days').value);
            const apr = parseFloat(document.getElementById('opt2_apr').value);
            const marketPrice = parseFloat(document.getElementById('opt2_market_price').value);

            let remainingHoldDays = totalHoldDays - waitDays;
            remainingHoldDays = remainingHoldDays < 0 ? 0 : remainingHoldDays;

            const dailyInterestRate = apr / 365 / 100;
            const totalYield = dailyInterestRate * remainingHoldDays;
            const raprEarned = raprReceived * totalYield;
            const totalRAPR = raprReceived + raprEarned;
            const totalValue = totalRAPR * marketPrice;
            const profitLoss = totalValue - investment;
            const breakevenPrice = investment / totalRAPR;

            const resultDiv = document.getElementById('opt2_result');
            let profitLossClass = profitLoss < 0 ? 'loss' : 'profit';

            resultDiv.innerHTML = `
                <strong>Total RAPR:</strong> ${isNaN(totalRAPR) ? 'Check values' : totalRAPR.toFixed(4)}<br>
                <strong>Value:</strong> ${isNaN(totalValue) ? 'Check values' : `$${totalValue.toFixed(2)}`}<br>
                <span class="${profitLossClass}"><strong>${profitLoss < 0 ? 'Loss' : 'Profit'}:</strong> $${isNaN(profitLoss) ? 'Check values' : profitLoss.toFixed(2)}</span><br>
                <strong>Breakeven:</strong> $${isNaN(breakevenPrice) ? 'Check values' : breakevenPrice.toFixed(2)}
            `;
        }
    </script>
</body>

</html>